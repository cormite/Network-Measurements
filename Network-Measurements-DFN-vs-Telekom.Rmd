---
title: "Network Measurements"
author:
- "Beatriz Serrano Solano"
- "Carlos Fernandez San Millan"
abstract: |

  Network data collected with iperf3 and mtr. Code in R to produce sensible data representations.
   
  Beatriz Serrano Solano: R code for proper semantics and sensitive graphical representation
  Carlos Fernandez San Millan: collected network-related data.

output:
  html_document:
    df_print: paged
    
#output: pdf_document
---

## Throughput comparison Ingress

- Import the data

```{r, echo=F}
(throughput <- read.csv(file='ingress.csv', stringsAsFactors=FALSE))
```

- Prepare data for ggplot

```{r, echo=F, warning=F, message=F}
library(reshape2)
throughput_plot <- melt(throughput)
colnames(throughput_plot) <- c("Provider", "Throughput")
```

- Combined histogram

```{r, message=F, warning=F, echo=F, fig.width=9}
library(ggplot2)

p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_histogram(alpha=1, binwidth = 0.04)
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(5,10,0.5))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p
```

- Combined density plot

```{r, echo=F, fig.width=9}
p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_density()
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(0,10,0.5))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p <- p + labs(
  title="Throughput Report Ingress - DFN vs Telekom",
  subtitle="Source: perfsonar.embl.es (CSUC), Destination: perfsonar1.embl.de (DFN) & perfsonar2.embl.de (Telekom)",
  x="Throughput (Gbps)",
  y="Density")
p
```



## Throughput comparison Egress

- Import the data

```{r, echo=F}
(throughput <- read.csv(file='egress.csv', stringsAsFactors=FALSE))
```

- Prepare data for ggplot

```{r, echo=F, warning=F, message=F}
library(reshape2)
throughput_plot <- melt(throughput)
colnames(throughput_plot) <- c("Provider", "Throughput")
```

- Combined histogram

```{r, message=F, warning=F, echo=F, fig.width=9}
library(ggplot2)

p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_histogram(alpha=1, binwidth = 0.04)
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(5,10,0.5))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p
```

- Combined density plot

```{r, echo=F, fig.width=9}
p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_density()
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(0,12,0.5))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p <- p + labs(
  title="Throughput Report Egress - DFN vs Telekom",
  subtitle="Source: perfsonar1.embl.de (DFN) & perfsonar2.embl.de (Telekom), Destination: perfsonar.embl.es (CSUC), ",
  x="Throughput (Gbps)",
  y="Density")
p
```





## Throughput comparison Egress

- Import the data

```{r, echo=F}
(throughput <- read.csv(file='egress-to-Rome.csv', stringsAsFactors=FALSE))
```

- Prepare data for ggplot

```{r, echo=F, warning=F, message=F}
library(reshape2)
throughput_plot <- melt(throughput)
colnames(throughput_plot) <- c("Provider", "Throughput")
```

- Combined histogram

```{r, message=F, warning=F, echo=F, fig.width=9}
library(ggplot2)

p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_histogram(alpha=1, binwidth = 0.04)
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(0,1200,100))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p
```

- Combined density plot

```{r, echo=F, fig.width=9}
p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_density()
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(0,1200,100))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p <- p + labs(
  title="Throughput Report Egress - DFN vs Telekom",
  subtitle="Source: perfsonar1.embl.de (DFN) & perfsonar2.embl.de (Telekom), Destination: perfsonar.embl.it (GARR), ",
  x="Throughput (Mbps)",
  y="Density")
p
```




## Throughput comparison Ingress

- Import the data

```{r, echo=F}
(throughput <- read.csv(file='ingress-from-Rome.csv', stringsAsFactors=FALSE))
```

- Prepare data for ggplot

```{r, echo=F, warning=F, message=F}
library(reshape2)
throughput_plot <- melt(throughput)
colnames(throughput_plot) <- c("Provider", "Throughput")
```

- Combined histogram

```{r, message=F, warning=F, echo=F, fig.width=9}
library(ggplot2)

p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_histogram(alpha=1, binwidth = 0.04)
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(0,1200,100))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p
```

- Combined density plot

```{r, echo=F, fig.width=9}
p <- ggplot(throughput_plot, aes(x=Throughput, fill=Provider))
p <- p + geom_density()
p <- p + scale_fill_manual(values=c("#00599d", "#bf0e88"))
p <- p + scale_x_continuous(breaks=seq(0,1200,100))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p <- p + labs(
  title="Throughput Report Ingress - DFN vs Telekom",
  subtitle="Source: perfsonar.embl.it (GARR), Destination:  perfsonar1.embl.de (DFN) & perfsonar2.embl.de (Telekom), ",
  x="Throughput (Mbps)",
  y="Density")
p
```













## Traceroute and latency

- Import the data

```{r, echo=F}
(mtr <- read.csv('mtr_google.com.csv', header=T, stringsAsFactors=F))
```

```{r, echo=F}
mtr <- mtr[order(-mtr$Hop),]
mtr$Ip <- factor(mtr$Ip, levels=mtr$Ip)
```

- Plot
```{r, echo=F, warning=F, message=F, fig.width=9}
p <- ggplot(mtr, aes(x=Ip, y=Avg))
p <- p + geom_line(size=1)
p <- p + geom_errorbar(aes(ymin=Avg-StDev, ymax=Avg+StDev), width=0.05, position=position_dodge(0.05))
p <- p + geom_point(size=3, colour="darkred")
p <- p + labs(title="Average and Standard Deviation of the latency", x="IP", y="Latency (ms)")
p <- p + scale_y_continuous(breaks=seq(0,30,2))
p <- p + theme(axis.text.x=element_text(face="bold")) 
p <- p + theme(axis.text.y=element_text(face="bold")) 
p <- p + coord_flip()
p
```


